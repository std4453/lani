query GetSeasonById($id: Int!) {
  seasonById(id: $id) {
    id
    infoSource
    isMonitoring
    jellyfinId
    mikanAnimeId
    seasonRoot
    tags
    title
    tvdbId
    tvdbSeason
    weekday
    yearAndSemester
    airTime
    bangumiId
    bilibiliMainlandId
    bilibiliThmId
    createdAt
    description
    isArchived
    episodesBySeasonId(orderBy: INDEX_ASC) {
      edges {
        node {
          airTime
          id
          index
          jellyfinEpisodeId
          title
          downloadJobsByEpisodeId(first: 1, orderBy: CREATED_AT_DESC) {
            totalCount
            edges {
              node {
                status
                isFailed
              }
            }
          }
        }
      }
    }
    episodesSource
    downloadSourcesBySeasonId {
      edges {
        node {
          id
          pattern
        }
      }
    }
  }
}

mutation UpdateSeasonById($id: Int!, $seasonPatch: SeasonPatch!) {
  updateSeasonById(input: { id: $id, seasonPatch: $seasonPatch }) {
    __typename
  }
}

query GetSeasonByTitle($title: String!) {
  seasonByTitle(title: $title) {
    id
  }
}

mutation UpdateSeasonDownloadSources(
  $input: UpdateSeasonDownloadSourcesInput!
) {
  updateSeasonDownloadSources(input: $input)
}

query GetDownloadSourceByPattern($pattern: String!) {
  downloadSourceByPattern(pattern: $pattern) {
    id
  }
}

mutation SyncMetadata($seasonId: Int!) {
  syncMetadata(seasonId: $seasonId)
}

mutation SyncEpisodeData($seasonId: Int!) {
  syncEpisodeData(seasonId: $seasonId)
}
